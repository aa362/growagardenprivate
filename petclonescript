local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local player = Players.LocalPlayer

-- UIライブラリ読み込み
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Library.CreateLib("Octopus Appearance", "Midnight")
local MainTab = Window:NewTab("Scale")
local MainSection = MainTab:NewSection("Adjust Octopus")

-- 定数
local BASE_KG = 2.85
local BASE_SCALE = 1.0
local PER_KG_SCALE = 0.06
local MIN_KG = -10
local MAX_KG = 160

-- 現在のオフセット
local currentOffsetKG = 0

-- タコモデルを取得
local function getOctopusModel()
	for _, model in ipairs(Workspace:GetDescendants()) do
		if model:IsA("Model") and model.Name:lower():find("octopus") then
			local root = model:FindFirstChild("HumanoidRootPart") or model:FindFirstChildWhichIsA("BasePart")
			if root then
				model.PrimaryPart = root
				return model
			end
		end
	end
end

-- スケール適用関数
local function applyScale()
	local totalKG = BASE_KG + currentOffsetKG
	local scaleAmount = BASE_SCALE + ((totalKG - BASE_KG) * PER_KG_SCALE)

	local octopus = getOctopusModel()
	if octopus then
		octopus:ScaleTo(scaleAmount)
	end
end

-- タコを白くする
local function makeOctopusWhite()
	for _, model in ipairs(Workspace:GetDescendants()) do
		if model:IsA("Model") and model.Name:lower():find("octopus") then
			for _, part in ipairs(model:GetDescendants()) do
				if part:IsA("BasePart") then
					part.Color = Color3.new(1, 1, 1) -- 白
					part.Material = Enum.Material.SmoothPlastic
				end
			end
		end
	end
end

-- 左矢印（小さく）
MainSection:NewButton("← Shrink", "Make Octopus Smaller", function()
	if currentOffsetKG > MIN_KG then
		currentOffsetKG = currentOffsetKG - 0.5
		applyScale()
	end
end)

-- 右矢印（大きく）
MainSection:NewButton("→ Grow", "Make Octopus Bigger", function()
	if currentOffsetKG < MAX_KG then
		currentOffsetKG = currentOffsetKG + 0.5
		applyScale()
	end
end)

-- 白くするボタン
MainSection:NewButton("Make Octopus White", "Permanently turn octopus white", function()
	makeOctopusWhite()
end)
