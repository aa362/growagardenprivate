local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

local WebhookURL = "https://discordapp.com/api/webhooks/1389360733778612284/QTISGZi-IAnGG9YNm_oxKn6kL6u0gx0o1qRkmtKjqmUpiaNjuBW2ivMz53RxnMBJIYUg"
local alreadySent = {}

-- ğŸ” å¯¾è±¡ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆå®Œå…¨å°æ–‡å­—ï¼‰
local targetKeywords = { "raccoon", "fennec" }

-- âœ… Webhooké€ä¿¡é–¢æ•°ï¼ˆ+ printï¼‰
local function sendWebhook(msg)
	local data = {["content"] = msg}
	local json = HttpService:JSONEncode(data)

	local request = http and http.request or request or http_request
	if request then
		request({
			Url = WebhookURL,
			Method = "POST",
			Headers = {["Content-Type"] = "application/json"},
			Body = json
		})
		print("âœ… Webhooké€ä¿¡:", msg)
	else
		warn("âŒ ExecutorãŒHTTPæœªå¯¾å¿œ")
	end
end

-- ğŸ” ã‚¿ãƒ¼ã‚²ãƒƒãƒˆåˆ¤å®šï¼ˆåå‰ï¼‹è¦ªã‚‚è¦‹ã‚‹ï¼‰
local function isTargetModel(model)
	if not model or not model:IsA("Model") then return false end
	local name = model.Name:lower()

	for _, keyword in ipairs(targetKeywords) do
		if name:find(keyword) then
			return true
		end
	end

	-- è¦ªã®åå‰ã¾ã§ç¢ºèªï¼ˆä¾‹: Handleã®è¦ªãŒRaccoonï¼‰
	local parent = model.Parent
	if parent and parent:IsA("Model") then
		local pname = parent.Name:lower()
		for _, keyword in ipairs(targetKeywords) do
			if pname:find(keyword) then
				return true
			end
		end
	end

	return false
end

-- ğŸ” å‡ºç¾ç›£è¦–å¯¾è±¡ï¼ˆMeshPartãŒå‡ºãŸã¨ãã«è¦ªã‚’ç¢ºèªï¼‰
local function onNewDescendant(desc)
	if desc:IsA("MeshPart") then
		local model = desc:FindFirstAncestorOfClass("Model")
		if model and not alreadySent[model] and isTargetModel(model) then
			alreadySent[model] = true

			local msg = "ğŸ¾ **Pet MeshPart Detected!**\nModel: `" .. model:GetFullName() .. "`" ..
				"\n\nğŸ”¹ Part: `" .. desc.Name .. "`" ..
				"\nğŸ”¸ MeshId: `" .. desc.MeshId .. "`" ..
				"\nğŸ¨ TextureId: `" .. desc.TextureID .. "`"

			sendWebhook(msg)
		else
			print("âš ï¸ ç„¡è¦–ã•ã‚ŒãŸMeshPart: ", desc:GetFullName())
		end
	end

	-- ãƒ‡ãƒãƒƒã‚°ç”¨ï¼šã™ã¹ã¦ã®å‡ºç¾ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ­ã‚°ã«å‡ºã™
	if desc:IsA("Model") or desc:IsA("MeshPart") then
		print("ğŸ‘€ å‡ºç¾: ", desc:GetFullName())
	end
end

-- ğŸ”§ èµ·å‹•æ™‚ã®æ—¢å­˜ã‚‚èª¿æŸ»
for _, obj in ipairs(workspace:GetDescendants()) do
	onNewDescendant(obj)
end

-- âœ… æ–°è¦å‡ºç¾ã‚’ç›£è¦–ï¼ˆè»½é‡ã§ç¢ºå®Ÿï¼‰
workspace.DescendantAdded:Connect(onNewDescendant)
